{% extends "_base.html" %}

{% block title %}Pediatrician summary – {{ child.name }} | PoopyFeed{% endblock title %}

{% block extra_css %}
<style>
  @media print {
    nav.navbar, footer, .no-print, #tz-banner { display: none !important; }
    body { padding-top: 0 !important; }
    .card { border: 1px solid #dee2e6 !important; box-shadow: none !important; }
  }
</style>
{% endblock extra_css %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-8">
    <div class="no-print mb-4">
      <nav aria-label="Breadcrumb" class="mb-2">
        <ol class="breadcrumb mb-0 small">
          <li class="breadcrumb-item"><a href="{% url 'children:child_list' %}" class="text-decoration-none">My Children</a></li>
          <li class="breadcrumb-item"><a href="{% url 'children:child_dashboard' pk=child.pk %}" class="text-decoration-none">{{ child.name }}</a></li>
          <li class="breadcrumb-item"><a href="{% url 'children:child_advanced' pk=child.pk %}" class="text-decoration-none">Advanced</a></li>
          <li class="breadcrumb-item active" aria-current="page">Pediatrician summary</li>
        </ol>
      </nav>
      <a href="{% url 'children:child_advanced' pk=child.pk %}" class="text-body-secondary text-decoration-none small">
        <i class="fa-solid fa-arrow-left me-1"></i>Back to Advanced
      </a>
    </div>

    <div class="d-flex justify-content-between align-items-start gap-2 mb-3">
      <h1 class="h3 fw-bold mb-0">Pediatrician summary – {{ child.name }}</h1>
      <span class="no-print">
        <button type="button" class="btn btn-primary btn-sm rounded-pill" onclick="window.print();" aria-label="Print this page">
          <i class="fa-solid fa-print me-1"></i>Print
        </button>
      </span>
    </div>
    <p class="text-body-secondary small mb-4">Last 7 days. Use Print to save as PDF or bring to your visit.</p>

    <div class="card border-0 shadow-sm rounded-4 mb-4">
      <div class="card-header bg-transparent border-0 pt-4 pb-0 px-4">
        <h2 class="h5 fw-bold mb-0">Summary</h2>
      </div>
      <div class="card-body p-4">
        <p class="text-body-secondary small mb-3">{{ summary.period }}</p>
        <div class="row g-3">
          <div class="col-md-4">
            <div class="p-3 bg-warning bg-opacity-10 rounded-3">
              <div class="fw-bold fs-5">{{ summary.feedings.count }}</div>
              <div class="text-body-secondary small">Feedings total</div>
              <div class="text-body-tertiary small mt-1">{{ feedings_per_day }} per day · {{ summary.feedings.total_oz|floatformat:1 }} oz total ({{ oz_per_day }} oz/day)</div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="p-3 bg-success bg-opacity-10 rounded-3">
              <div class="fw-bold fs-5">{{ summary.diapers.count }}</div>
              <div class="text-body-secondary small">Diaper changes total</div>
              <div class="text-body-tertiary small mt-1">{{ diapers_per_day }} per day</div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="p-3 bg-primary bg-opacity-10 rounded-3">
              <div class="fw-bold fs-5">{{ summary.sleep.naps }}</div>
              <div class="text-body-secondary small">Naps total</div>
              <div class="text-body-tertiary small mt-1">{{ naps_per_day }} per day · {{ summary.sleep.total_minutes }} min total ({{ sleep_minutes_per_day }} min/day)</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card border-0 shadow-sm rounded-4">
      <div class="card-header bg-transparent border-0 pt-4 pb-0 px-4">
        <h2 class="h5 fw-bold mb-0">Breakdown</h2>
      </div>
      <div class="card-body p-4">
        <dl class="row mb-0 small">
          <dt class="col-sm-4 text-body-secondary">Feedings (bottle / breast)</dt>
          <dd class="col-sm-8">{{ summary.feedings.bottle }} bottle, {{ summary.feedings.breast }} breast</dd>
          <dt class="col-sm-4 text-body-secondary">Diapers (wet / dirty / both)</dt>
          <dd class="col-sm-8">{{ summary.diapers.wet }} wet, {{ summary.diapers.dirty }} dirty, {{ summary.diapers.both }} both</dd>
          <dt class="col-sm-4 text-body-secondary">Avg nap duration</dt>
          <dd class="col-sm-8">{% if summary.sleep.naps %}{{ summary.sleep.avg_duration }} min{% else %}—{% endif %}</dd>
        </dl>
      </div>
    </div>

    <p class="text-body-tertiary small mt-4 no-print">
      <a href="{% url 'children:child_advanced' pk=child.pk %}" class="text-decoration-none">← Back to Advanced</a>
    </p>
  </div>
</div>
{% endblock content %}
